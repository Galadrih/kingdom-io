/* =========================================================
   ASHEN REALMS - DARK FANTASY UI (TAM & DÜZELTİLMİŞ)
   ========================================================= */

/* ========== GENEL RESET & TEMEL ========== */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    user-select: none;
    font-family: 'Cinzel', 'Trajan Pro', 'Times New Roman', serif;
}

body {
    background: radial-gradient(circle at center, #050505 55%, #000 100%);
    color: #d8d8d8;
    height: 100vh;
    overflow: hidden;
    cursor: url('/assets/cursor.png'), auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    position: relative;
}

.hidden {
    display: none !important;
}

/* Hafif kırmızı aura */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at center, rgba(255,0,0,0.04), transparent 70%);
    pointer-events: none;
    mix-blend-mode: screen;
    animation: pulseAura 9s infinite ease-in-out;
    z-index: 0;
}
body::after {
    content: "";
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at 50% 80%, rgba(255,0,0,0.04), transparent 80%);
    pointer-events: none;
    z-index: 0;
}

@keyframes pulseAura {
    0%,100% { opacity: 0.25; }
    50% { opacity: 0.6; }
}

/* Başlıklar */
h1, h2, h3, h4 {
    color: #c92020;
    text-shadow: 0 0 8px rgba(201,32,32,0.9), 0 0 16px rgba(80,0,0,0.9);
    letter-spacing: 1px;
}

/* Scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-thumb {
    background: #440000;
    border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover { background: #770000; }

/* ========== GENEL PANEL & BUTON STİLLERİ ========== */

.panel,
.inventory-panel,
.char-panel,
.shop-panel,
.skill-panel {
    background: radial-gradient(circle at top, #181818 0%, #070707 60%, #020202 100%);
    border: 3px solid #3c3c3c;
    border-radius: 10px;
    box-shadow:
        0 0 26px rgba(255,0,0,0.30),
        inset 0 0 14px rgba(0,0,0,0.95);
    padding: 15px;
    color: #d8d8d8;
    pointer-events: auto;
    backdrop-filter: blur(4px);
}

.panel-header,
.shop-panel-header,
.skill-panel-header,
.char-panel-header {
    background: linear-gradient(180deg, #262626, #121212);
    border-bottom: 2px solid #5c0000;
    border-radius: 8px 8px 0 0;
    padding: 9px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: inset 0 -3px 6px rgba(0,0,0,0.9);
}

.panel-header h3,
.shop-panel-header h3,
.skill-panel-header h3,
.char-panel-header h3,
.panel-header h4 {
    color: #ff3333;
    font-size: 16px;
    text-shadow: 0 0 6px rgba(255,60,60,1);
}

/* Kapatma butonları */
.close-btn,
#characterPanelCloseBtn,
#skillPanelCloseBtn,
#shopPanelCloseBtn,
#blacksmithPanelCloseBtn,
#tradeCancelBtn,
#targetPlayerMenuCloseBtn,
#skillChoiceCloseBtn {
    background: radial-gradient(circle at 30% 0%, #770000, #220000);
    color: #ffaaaa;
    border: 2px solid #ff0000;
    border-radius: 50%;
    width: 26px;
    height: 26px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    box-shadow: 0 0 9px rgba(255,0,0,0.6);
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}
.close-btn:hover,
#characterPanelCloseBtn:hover,
#skillPanelCloseBtn:hover,
#shopPanelCloseBtn:hover,
#blacksmithPanelCloseBtn:hover,
#tradeCancelBtn:hover,
#targetPlayerMenuCloseBtn:hover,
#skillChoiceCloseBtn:hover {
    background: radial-gradient(circle at 30% 0%, #aa0000, #330000);
    box-shadow: 0 0 16px rgba(255,50,50,0.95);
    transform: scale(1.1);
}

/* Genel buton */
button {
    background: linear-gradient(180deg, #262626, #111);
    color: #e0e0e0;
    border: 2px solid #3c3c3c;
    border-radius: 6px;
    padding: 8px 16px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    text-shadow: 0 0 3px #000;
    box-shadow: inset 0 0 6px rgba(255,0,0,0.12);
}
button:hover {
    background: linear-gradient(180deg, #3a0000, #150000);
    border-color: #c92020;
    color: #ffecec;
    box-shadow: 0 0 18px rgba(255,0,0,0.7);
}
button:active {
    transform: scale(0.96);
    background: linear-gradient(180deg, #550000, #220000);
}

/* Tooltip */
.tooltip {
    background: linear-gradient(180deg, #220000, #000);
    color: #ffdddd;
    padding: 8px 10px;
    border: 1px solid #aa0000;
    border-radius: 8px;
    box-shadow: 0 0 18px rgba(255,0,0,0.55);
    font-size: 12px;
    max-width: 240px;
    text-align: left;
}

/* ========== GAME WORLD & CANVAS ========== */

#gameWorld {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

#gameUI {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
}

#gameCanvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    z-index: 1; /* Tüm paneller bunun üstünde */
}

/* ========== LOGIN EKRANI ========== */

#loginScreen {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 460px;
    padding: 28px;
    background: radial-gradient(circle at top, #151515, #050505 75%);
    border-radius: 12px;
    border: 3px solid #660000;
    box-shadow: 0 0 40px rgba(255,0,0,0.55);
    text-align: center;
    pointer-events: auto;
    z-index: 20;
}

#loginScreen h1 {
    margin-bottom: 18px;
    font-size: 24px;
}

#accountNameInput,
#passwordInput,
#registerPasswordConfirm {
    width: 80%;
    padding: 10px;
    margin-top: 8px;
    background: #000;
    border: 2px solid #550000;
    border-radius: 8px;
    color: #fff;
    font-size: 14px;
    text-align: center;
    box-shadow: inset 0 0 6px rgba(0,0,0,0.8);
}

.choice-block {
    margin-bottom: 14px;
    padding: 10px;
    background: rgba(0,0,0,0.5);
    border-radius: 8px;
    border: 1px solid #2b0000;
}

.button-group {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
}

/* ========== KARAKTER SEÇİMİ & OLUŞTURMA ========== */

#characterSelectionScreen,
#creationScreen {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: radial-gradient(circle at top, #171717, #050505);
    border-radius: 12px;
    border: 3px solid #550000;
    box-shadow: 0 0 38px rgba(255,0,0,0.5);
    text-align: center;
    pointer-events: auto;
    z-index: 20;
}

#characterSelectionScreen {
    width: 520px;
    padding: 24px;
}

#creationScreen {
    width: 720px;
    padding: 26px;
}

#characterList .char-slot {
    padding: 8px 10px;
    border-radius: 6px;
    border: 1px solid #333;
    background: rgba(0,0,0,0.6);
    cursor: pointer;
    transition: all 0.2s;
}
#characterList .char-slot:hover,
#characterList .char-slot.selected {
    border-color: #c92020;
    box-shadow: 0 0 14px rgba(255,0,0,0.7);
}

.choice-btn {
    padding: 8px 14px;
    background: #181818;
    border: 2px solid #6b471c;
    color: #eee;
    border-radius: 6px;
    cursor: pointer;
    text-shadow: 1px 1px 1px #000;
    transition: all 0.25s;
}
.choice-btn:hover {
    background: #282828;
    border-color: #daa520;
    box-shadow: 0 0 10px rgba(255,215,0,0.4);
}
.choice-btn.selected {
    background: #8b0000;
    border-color: #ff5500;
    color: #fff;
}

.creation-content {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 18px;
    margin-top: 10px;
}
.creation-left-side {
    width: 60%;
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.creation-right-side {
    width: 40%;
    background: rgba(0,0,0,0.5);
    border-radius: 8px;
    border: 1px solid #6b471c;
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#classPreviewImage {
    width: 220px;
    height: 360px;
    object-fit: contain;
    image-rendering: pixelated;
    border-radius: 4px;
    border: 2px solid #ffd700;
    background: #111;
    box-shadow: 0 0 18px rgba(255,215,0,0.6);
    margin-bottom: 8px;
}

/* ========== PLAYER STATS (Sol Üst) ========== */

#playerStats {
    position: absolute;
    top: 18px;
    left: 18px;
    background: radial-gradient(circle at top, #151515, #050505);
    border: 3px solid #3a0000;
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0 0 22px rgba(255,0,0,0.5), inset 0 0 10px rgba(0,0,0,1);
    min-width: 210px;
    pointer-events: auto;
    z-index: 5;
}

.stat-row { margin-bottom: 7px; }

.stat-label {
    color: #ff4444;
    font-size: 12px;
    font-weight: bold;
    text-shadow: 0 0 4px #000;
}
.stat-value {
    color: #ddd;
    font-size: 14px;
}

.hp-bar,
.mp-bar,
.exp-bar {
    width: 180px;
    height: 14px;
    background: #090909;
    border: 1px solid #333;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: inset 0 0 5px #000;
    margin-top: 3px;
    position: relative;
}
.bar-fill {
    height: 100%;
    width: 0;
    transition: width 0.3s;
}
.hp-bar .bar-fill {
    background: linear-gradient(90deg, #550000, #ff0000);
    box-shadow: 0 0 12px rgba(255,0,0,0.8);
}
.mp-bar .bar-fill {
    background: linear-gradient(90deg, #000033, #0066ff);
    box-shadow: 0 0 12px rgba(0,90,255,0.8);
}
.exp-bar .bar-fill {
    background: linear-gradient(90deg, #004000, #00ff66);
}

.stat-text,
.exp-text {
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
    font-size: 10px;
    color: #f5f5f5;
    text-align: center;
    text-shadow: 0 0 4px #000;
}

/* ========== ACTION BAR (Alt Orta) ========== */

#actionBar {
    position: absolute;
    bottom: 22px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
    padding: 10px 14px;
    background: radial-gradient(circle at top, #111, #020202);
    border-radius: 12px;
    border: 3px solid #550000;
    box-shadow: 0 0 26px rgba(255,0,0,0.6), inset 0 0 14px rgba(0,0,0,0.95);
    z-index: 8;
    pointer-events: auto;
}

.action-slot {
    position: relative;
    width: 52px;
    height: 52px;
    border-radius: 7px;
    border: 2px solid #333;
    background: radial-gradient(circle at center, #191919, #050505);
    box-shadow: inset 0 0 10px #000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    cursor: pointer;
}
.action-slot:hover {
    border-color: #c92020;
    box-shadow: 0 0 16px rgba(255,0,0,0.85), inset 0 0 6px rgba(255,0,0,0.4);
    transform: translateY(-2px);
}
.action-slot.active {
    border-color: #ff0000;
    box-shadow: 0 0 20px rgba(255,0,0,1);
}
.hotkey-label {
    position: absolute;
    bottom: 2px;
    right: 3px;
    background: #300000;
    color: #ffcccc;
    font-size: 9px;
    padding: 1px 4px;
    border-radius: 3px;
    border: 1px solid #550000;
}

/* ========== SAĞ PANEL & ENVANTER & MINIMAP ========== */

#rightPanel {
    position: absolute;
    top: 18px;
    right: 18px;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 10px;
    z-index: 6;
    pointer-events: none;
}

/* Envanter butonu (I) */
.panel-btn {
    width: 26px;
    height: 26px;
    border-radius: 6px;
    background: radial-gradient(circle at 30% 0%, #550000, #111);
    border: 2px solid #771111;
    color: #ffdddd;
    font-size: 14px;
    text-align: center;
    line-height: 22px;
    cursor: pointer;
    box-shadow: 0 0 12px rgba(255,0,0,0.7);
    pointer-events: auto;
    transition: all 0.2s;
}
.panel-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 18px rgba(255,0,0,1);
}

/* ENVANTER: SAĞ ALTA ALINDI */
#inventoryPanel.inventory-panel {
    position: fixed;
    bottom: 92px;       /* actionBar'ın biraz üstü */
    right: 32px;
    left: auto;
    top: auto;
    width: 700px;
    height: 520px;
    padding: 18px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 9;
    pointer-events: auto;
}

/* Envanter iç düzen */
.inventory-content-wrapper {
    display: flex;
    gap: 18px;
    flex: 1;
}

/* Karakter silüet alanı */
.character-section {
    position: relative;
    width: 240px;
    height: 440px;
    background: radial-gradient(circle at center, #101010, #000);
    border-radius: 12px;
    border: 2px solid #330000;
    box-shadow: inset 0 0 20px #000, 0 0 18px rgba(255,0,0,0.35);
    display: flex;
    align-items: center;
    justify-content: center;
}
.character-silhouette {
    width: 150px;
    height: 360px;
    background: url('/assets/silhouette.png') center/contain no-repeat;
    opacity: 0.65;
    filter: drop-shadow(0 0 22px #aa0000);
}

/* Ekipman slotları */
.equip-slot {
    position: absolute;
    width: 58px;
    height: 58px;
    background: radial-gradient(circle at center, #222, #000);
    border-radius: 9px;
    border: 2px solid #444;
    box-shadow: inset 0 0 10px #000;
    transition: all 0.2s;
}
.equip-slot:hover {
    border-color: #ff0000;
    box-shadow: 0 0 18px rgba(255,0,0,0.8);
    transform: scale(1.06);
}
.equip-slot.equipped {
    border-color: #c92020;
    background: radial-gradient(circle at center, rgba(255,0,0,0.18), #000);
}

/* Pozisyonlar */
.equip-slot[data-type="helmet"]   { top: 14px;  left: 50%; transform: translateX(-50%); }
.equip-slot[data-type="necklace"] { top: 84px;  left: 50%; transform: translateX(-50%); }
.equip-slot[data-type="armor"]    { top: 154px; left: 50%; transform: translateX(-50%); }
.equip-slot[data-type="weapon"]   { top: 154px; left: 10px; }
.equip-slot[data-type="shield"]   { top: 154px; right: 10px; }
.equip-slot[data-type="bracelet"] { top: 230px; left: 10px; }
.equip-slot[data-type="earring"]  { top: 230px; right: 10px; }
.equip-slot[data-type="shoes"]    { bottom: 18px; left: 50%; transform: translateX(-50%); }

/* Envanter grid */
#inventoryGrid {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    padding: 10px;
    background: rgba(0,0,0,0.7);
    border-radius: 12px;
    border: 2px solid #440000;
    box-shadow: inset 0 0 15px #000;
}
.inv-slot {
    position: relative;
    width: 72px;
    height: 72px;
    border-radius: 8px;
    border: 2px solid #333;
    background: radial-gradient(circle at center, #1a1a1a, #050505);
    box-shadow: inset 0 0 8px #000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}
.inv-slot:hover {
    border-color: #c92020;
    box-shadow: 0 0 15px rgba(255,0,0,0.6);
    transform: translateY(-2px);
}
.inv-slot img {
    width: 90%;
    height: 90%;
    object-fit: contain;
    filter: drop-shadow(0 0 5px rgba(255,0,0,0.4));
}
.item-quantity {
    position: absolute;
    bottom: 3px;
    right: 4px;
    padding: 1px 4px;
    font-size: 11px;
    color: #ff6666;
    background: #2a0000;
    border-radius: 3px;
    border: 1px solid #550000;
}
.item-plus {
    position: absolute;
    bottom: 0px;
    right: 2px;
    background-color: rgba(0,0,0,0.8);
    color: #ffcc00;
    font-size: 10px;
    padding: 1px 4px;
    border-radius: 3px;
    line-height: 1;
    pointer-events: none;
    border: 1px solid rgba(255,204,0,0.3);
}

/* Envanter Yang */
.inventory-yang-display {
    display: flex;
    justify-content: flex-end;
    gap: 6px;
    margin-top: 4px;
    font-size: 13px;
    color: #ffdddd;
}

/* Mini Map */
.mini-map {
    width: 150px;
    height: 150px;
    background: radial-gradient(circle at center, #111, #000);
    border-radius: 12px;
    border: 2px solid #550000;
    box-shadow: 0 0 18px rgba(255,0,0,0.4);
    pointer-events: auto;
}

/* ========== KARAKTER PANELİ (C) ========== */

.char-panel {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 420px;
    z-index: 12;
}

.char-panel-content {
    display: flex;
    gap: 14px;
    margin-top: 10px;
}

.char-info-box {
    flex: 1;
    padding: 10px;
    background: rgba(0,0,0,0.6);
    border-radius: 8px;
    border: 1px solid #330000;
    box-shadow: inset 0 0 10px #000;
}
.char-info-name {
    font-weight: bold;
    font-size: 17px;
    color: #c92020;
    border-bottom: 1px solid #550000;
    padding-bottom: 4px;
    margin-bottom: 6px;
}
.char-info-row {
    display: flex;
    justify-content: space-between;
    font-size: 13px;
    margin-bottom: 3px;
}
.char-stats-box {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 5px;
}
.char-stat-row {
    display: flex;
    align-items: center;
    gap: 6px;
    justify-content: space-between;
}
.stat-name {
    width: 40px;
    font-weight: bold;
}
.stat-plus-btn {
    width: 22px;
    height: 22px;
    padding: 0;
    border-radius: 50%;
    font-weight: bold;
    background: #330000;
    border-color: #880000;
}

/* ========== SKILL PANELİ (K) ========== */

.skill-panel {
    position: absolute;
    top: 53%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 520px;
    z-index: 12;
}
#skillPanelList {
    max-height: 260px;
    overflow-y: auto;
    margin-top: 8px;
    padding-right: 4px;
}
.skill-panel-footer {
    margin-top: 8px;
    text-align: right;
    font-size: 13px;
    color: #ffcccc;
}

/* ========== SHOP PANELİ (Satın Al / Sat) ========== */

.shop-panel {
    position: absolute;
    top: 52%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 520px;
    z-index: 11;
}

.shop-tabs {
    display: flex;
    border-bottom: 1px solid #440000;
    margin-top: 6px;
}
.tab-btn {
    flex: 1;
    border: none;
    background: #111;
    color: #aaa;
    font-weight: bold;
    padding: 8px;
    cursor: pointer;
    transition: all 0.2s;
}
.tab-btn.active {
    background: #3a0000;
    color: #ff4444;
    box-shadow: inset 0 -3px 6px rgba(255,0,0,0.4);
}

/* SAT / BUY TAB GÖRÜNÜRLÜK DÜZELTME */
.shop-tab { display: block; }
.shop-tab.hidden { display: none !important; }

.shop-content {
    padding: 10px 4px;
    max-height: 260px;
    overflow-y: auto;
}
.shop-list { display: flex; flex-direction: column; gap: 4px; }

.shop-item-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 8px;
    border-radius: 6px;
    background: rgba(10,0,0,0.7);
    border: 1px solid #330000;
    transition: all 0.2s;
}
.shop-item-row:hover { background: rgba(50,0,0,0.9); }
.shop-item-name {
    color: #ffcccc;
    font-weight: bold;
    font-size: 13px;
}
.shop-price {
    color: #ff4444;
    font-weight: bold;
    font-size: 13px;
}
.shop-panel-footer {
    display: flex;
    justify-content: flex-end;
    gap: 6px;
    font-size: 13px;
}

/* ========== TRADE PANELİ ========== */

#tradePanel {
    position: absolute;
    top: 52%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 640px;
    height: 420px;
    z-index: 12;
}
.trade-container {
    display: flex;
    gap: 12px;
    padding: 10px;
}
.trade-side {
    flex: 1;
    background: rgba(0,0,0,0.6);
    border-radius: 8px;
    border: 1px solid #330000;
}
.trade-header span {
    color: #ff4444;
    font-weight: bold;
    font-size: 13px;
}
.trade-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 5px;
    padding: 8px;
}
.trade-slot {
    width: 58px;
    height: 58px;
    border-radius: 6px;
    background: radial-gradient(circle at center, #191919, #050505);
    border: 2px solid #333;
    box-shadow: inset 0 0 8px #000;
}
.trade-yang {
    padding: 6px 8px;
    display: flex;
    gap: 4px;
    align-items: center;
    font-size: 12px;
}
.trade-footer {
    padding: 8px 10px;
    text-align: right;
}
.trade-status {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    border: 1px solid #555;
    margin-left: auto;
}
.trade-status.locked {
    background: #003300;
    border-color: #00ff00;
    box-shadow: 0 0 8px #00ff00;
}

/* Trade request popup */
#tradeRequestPanel {
    position: absolute;
    top: 18%;
    left: 50%;
    transform: translateX(-50%);
    width: 260px;
    z-index: 13;
}

/* ========== CHAT PANELİ ========== */

#chatContainer {
    position: absolute;
    bottom: 98px;
    left: 24px;
    width: 420px;
    height: 200px;
    background: rgba(10,0,0,0.6);
    border-radius: 8px;
    border: 2px solid #440000;
    box-shadow: 0 0 20px rgba(255,0,0,0.35);
    display: flex;
    flex-direction: column;
    pointer-events: auto;
    font-size: 13px;
    z-index: 7;
}
#chatMessages {
    flex: 1;
    padding: 8px;
    overflow-y: auto;
}
.chat-msg {
    margin-bottom: 3px;
    color: #e6e6e6;
    text-shadow: 0 0 2px #000;
}
.chat-msg.system { color: #ff6666; font-style: italic; }
.chat-msg.error { color: #ff2222; font-weight: bold; }
.chat-msg.party { color: #7fffaa; }
.chat-msg.whisper-sent,
.chat-msg.whisper-received { color: #c58cff; }

#chatInput {
    border: none;
    border-top: 1px solid #550000;
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 6px 8px;
    font-size: 13px;
    outline: none;
}

/* ========== NOTIFICATION & WARN PANEL ========== */

.notification-panel {
    position: absolute;
    top: -140px;
    left: 50%;
    transform: translateX(-50%);
    width: 520px;
    padding: 14px;
    background: rgba(24,0,0,0.96);
    border-radius: 0 0 12px 12px;
    border: 2px solid #660000;
    text-align: center;
    color: #ff4444;
    box-shadow: 0 0 26px rgba(255,0,0,0.75);
    transition: top 0.5s ease;
    z-index: 20;
}
.notification-panel.show { top: 0; }

#warnPanel.warn-panel,
.warn-panel {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 14px 28px;
    background: linear-gradient(180deg, rgba(90,0,0,0.96), rgba(0,0,0,0.98));
    border-radius: 10px;
    border: 2px solid #ff0000;
    color: #fff;
    font-size: 18px;
    font-weight: bold;
    text-shadow: 0 0 6px #000;
    box-shadow: 0 0 30px rgba(255,0,0,0.9);
    opacity: 0;
    transition: opacity 0.25s, top 0.25s;
    z-index: 30;
}
.warn-panel.show { top: 55%; opacity: 1; }

/* ========== PARTY, TARGET MENÜ, BUFFS ========== */

#partyPanel {
    position: absolute;
    top: 18px;
    right: 210px;
    min-width: 160px;
    padding: 8px;
    background: rgba(0,0,0,0.7);
    border-radius: 8px;
    border: 1px solid #330000;
    box-shadow: 0 0 14px rgba(255,0,0,0.4);
    pointer-events: auto;
    font-size: 12px;
    z-index: 6;
}

#partyMemberList {
    max-height: 120px;
    overflow-y: auto;
    margin-bottom: 6px;
}

#targetPlayerMenu {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 220px;
    z-index: 14;
}
#targetPlayerActions {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 10px;
}

#buffsPanel {
    position: absolute;
    top: 18px;
    left: 260px;
    display: flex;
    gap: 6px;
    z-index: 6;
    pointer-events: auto;
}
#buffsPanel .buff-icon {
    width: 26px;
    height: 26px;
    border-radius: 4px;
    background: radial-gradient(circle at center, #222, #000);
    border: 1px solid #770000;
    box-shadow: 0 0 10px rgba(255,0,0,0.5);
}

/* ========== SKILL CHOICE WINDOW (Lv5) ========== */

.skill-choice-panel {
    position: absolute;
    top: 52%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 420px;
    padding: 18px;
    background: radial-gradient(circle at top, #181818, #050505);
    border-radius: 10px;
    border: 3px solid #770000;
    box-shadow: 0 0 32px rgba(255,0,0,0.8);
    text-align: center;
    z-index: 25;
    pointer-events: auto;
}
#skillChoiceButtons {
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

/* ========== BLACKSMITH / UPGRADE PANEL ========== */

#blacksmithPanel {
    position: absolute;
    top: 52%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 360px;
    z-index: 13;
}
#upgradeInterface {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px;
    text-align: center;
    gap: 10px;
}
#upgradeSlot {
    width: 64px;
    height: 64px;
    border-radius: 8px;
    border: 2px dashed #666;
    background: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 6px;
}
#upgradeSlot.occupied {
    border-style: solid;
    border-color: #bbb;
    background: rgba(0,0,0,0.7);
}
#upgradeSlot img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}
#upgradeInfo {
    width: 100%;
    text-align: left;
    font-size: 12px;
    color: #eee;
}
#upgradeInfo div { margin-bottom: 4px; }
#upgradeButton {
    width: 80%;
    margin-top: 4px;
    font-weight: bold;
}
